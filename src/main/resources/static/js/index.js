const articles = [
    {
        title: "비 일단 소강 상태지만...비구름 계속 들어와 내일까지 시간당 30~80㎜ 강한 비",
        content:
            "18일 오전 일부 지역에서 비가 소강 상태를 보이고 있는 가운데, 토요일인 19일까지 전국 대부분 지역에 매우 강하고 많은 비가 내릴 전망이다.\n\n" +
            "18일 기상청에 따르면, 이날 오전 일부 지역에서는 비가 소강 상태를 보였다. 오전 11시 기준 수도권과 강원 영서, 충남 서해안을 중심으로 10㎜ 안팎의 약한 비가 내렸다. 오전 10시부터 오전 11시까지 1시간 동안 주요 지역의 강수량은 경기 남양주 5㎜, 강원 춘천 6㎜, 대전 0.5㎜ 등이다.\n\n" +
            "기상청은 “18일 낮까지 내륙을 중심으로 소강 상태를 보이는 곳이 많겠다”고 밝혔다.\n\n" +
            "그러나 서해안에서 비구름대가 지속적으로 들어오고 있어, 19일까지 전국에 시간당 30~80㎜의 비가 내릴 것으로 보인다. 18~19일 예상 강수량은 수도권·강원도(20일 아침까지) 30~150㎜, 충청·전라·경상권 50~200㎜, 제주도 10~150㎜ 등으로 예보됐다. 시간당 강수량은 대부분 지역에서 30㎜ 안팎이겠으나, 전라권과 경상권의 경우 최고 80㎜까지 내리겠다.\n\n" +
            "출처: https://www.chosun.com/national/transport-environment/2025/07/18/G3DQZX4X4VD3TC63CS4GNMQEKY/",
        img: "https://www.chosun.com/resizer/v2/4SHSUJMWMOVHYYIGFIDATCSGEU.jpg?auth=9fc7cfda94d2099c9515715cd46adce01955ddfcc372d4b03888978d9503dcb7&width=616"
    },
    {
        title: "아이폰 16, 사도 될까요?",
        content: "기본 아이폰16 모델의 외관상 변화는 크게 두 가지입니다. 바로 다채로운 색상과 새로운 후면 카메라 배치죠. 아이폰 16은 오래간만에 상당히 화사한 색상으로 돌아왔어요. 특히 강렬한 푸른빛의 울트라마린이 가장 마음에 드네요. 그 외에도 청록색 느낌의 ‘틸’과 진한 핑크가 기존의 화이트와 블랙에 더불어 추가됐습니다. 카메라는 기존의 가로 배치로 다시 돌아간 느낌인데요, 애플 비전 프로에서 볼 수 있는 공간 영상 촬영을 위한 배치입니다.\n\n" +
                 "또한, 아이폰 16에는 새로운 물리 버튼이 두 개나 추가됐습니다. 하나는 아이폰15 프로에서 먼저 선보인 동작 버튼이고, 다른 하나는 이번에 16 라인업에서 새롭게 선보이는 ‘카메라 컨트롤’입니다. 카메라 컨트롤은 오직 카메라를 위한 버튼으로 오른쪽 측면 하단에 위치해있습니다. 누르면 어디서든 카메라 앱이 열리고, 깊게 눌러서 셔터 버튼으로 사용할 수 있으며, 버튼에 손가락을 대고 좌우로 스와이프하는 슬라이드 제스처를 통해 카메라의 줌 레벨이라던지, 그 외의 카메라 세부 조작을 하나의 컨트롤 인터페이스에서 실행할 수 있어요. 이를 위해 물리적 버튼과 더불어 탭틱 엔진, 포스 센서, 그리고 슬라이드 제스처를 감지하기 위한 정전식 센서가 모두 하나의 제어 장치로 결합돼 있습니다.\n\n" +
                 "그럼 자연스럽게 카메라 얘기를 해봐야겠죠. 아이폰16의 카메라 구성은 아이폰 15에서 크게 바뀌진 않았습니다. 여전히 메인 카메라는 4,800만 화소 센서와 26mm f2.6 렌즈 조합으로, 센서의 가운데를 크롭 하는 방식의 2x 광학 줌을 지원합니다. 초광각 카메라는 약간의 업그레이드가 있었습니다. 센서가 1,200만 화소인 점은 같지만 , 조리개가 f2.2로 커지고 자동초점을 지원하면서 여태 프로 라인업에만 지원하던 접사 촬영이 가능해졌습니다. 그리고 메인 카메라의 렌즈 커버에는 반사방지 코팅이 적용되어 아이폰 카메라의 고질적 문제였던 강한 광원 앞에서 드러나는 잔상 문제에 대응할 수 있을 것으로 보입니다.\n\n" +
                 "출처: https://the-edit.co.kr/71111",

        img: "https://the-edit.co.kr/wp-content/uploads/2024/09/IMG_1092_watermark.jpeg"
    },
    {
        title: "비건 식당 어디까지 가봤니?",
        content: "요즘 뜨는 비건 맛집 리스트! 채식주의자뿐 아니라 일반 고객도 매료된 맛집 소개.",
        img: "https://picsum.photos/id/292/800/400"
    },
    {
        title: "인터넷 밈이 바꾼 정치 풍토",
        content: "정치와 유머의 경계가 무너지고 있습니다. 밈이 여론 형성에 미치는 영향은 점점 커지고 있습니다.",
        img: "https://picsum.photos/id/1025/800/400"
    },
    {
        title: "AI 작곡 시대의 저작권 논쟁",
        content: "AI가 만든 음악은 누구의 것인가? 작곡가 협회와 기술 기업의 입장은 엇갈리고 있습니다.",
        img: "https://picsum.photos/id/1037/800/400"
    },
    {
        title: "한국인의 커피 사랑",
        content: "한국인의 1일 평균 커피 소비량은 세계 상위권입니다. 스타트업들도 커피 구독 서비스를 출시하고 있죠.",
        img: "https://picsum.photos/id/8/800/400"
    },
    {
        title: "SKT 해킹 아닌 로그인 했다” 화이트해커 더 충격받은 이유",
        content: "지난 4월 22일 SK텔레콤(SKT)은 ‘유심 관련 일부 정보가 유출된 정황을 발견했다’는 홈페이지 공지를 올렸다.\n\n" +
                "‘유심 정보’가 아닌 “유심 관련 일부 정보”, ‘유출됐다’가 아니라 “유출된 정황 발견”이라고 표현했지만 결과적으로 SKT 2500만 가입자 유심 정보 대부분이 해킹당한 것으로 드러났다. 해커들은 3년 전부터 SKT 서버에 잠입했다. 어떻게 이런 일이 가능했을까. 해킹 사태 두 달 뒤, 대다수 이용자는 유심 교체를 완료했다. 위약금 면제, 통신비 할인 혜택 등을 받았다. 석 달 만에 여론은 잠잠해졌다. 그리고 지난 4일 SKT 해킹 사태 최종 조사 결과가 공개됐다.\n\n" +
                "출처: https://www.joongang.co.kr/article/25352241",
        img: "https://www.dailysecu.com/news/photo/202504/165757_194216_3054.jpg"
    },
    {
        title: "2030세대의 주거 트렌드",
        content: "오피스텔 대신 도시형 생활주택을 선택하는 청년층이 늘고 있습니다.",
        img: "https://picsum.photos/id/1060/800/400"
    }
];

function renderArticles(filter = "") {
    const container = document.getElementById("newsList");
    container.innerHTML = "";
    const filtered = articles.filter(a =>
        a.title.toLowerCase().includes(filter.toLowerCase())
    );
    filtered.forEach((article, index) => {
        const id = "collapse" + index;
        let paragraphs = article.content.split(/\n\s*\n/).map((p) => {
            if (p.trim().startsWith("출처:")) {
                const url = p.trim().replace(/^출처:\s*/, "");
                return `<p>출처: <a href="${url}" target="_blank" rel="noopener noreferrer">기사 링크</a></p>`;
            } else {
                return `<p>${p.trim()}</p>`;
            }
        }).join("");
        container.innerHTML += `
      <div class="card mb-4 news-item">
        <img src="${article.img}" class="card-img-top" alt="news image">
        <div class="card-body">
          <h2 class="card-title">${article.title}</h2>
          <p><a class="btn btn-outline-primary btn-sm" data-bs-toggle="collapse" href="#${id}" role="button" aria-expanded="false" aria-controls="${id}">더 읽기</a></p>
          <div class="collapse" id="${id}">
            <div class="card card-body">
              ${paragraphs}
            </div>
          </div>
        </div>
        <div class="card-footer text-muted">Posted on July 18, 2025</div>
      </div>
    `;
    });
}

document.getElementById("searchInput").addEventListener("input", (e) => {
    renderArticles(e.target.value);
});
renderArticles();

function updateNav() {
    const isLogin = !!localStorage.getItem("token");
    document.getElementById("navLogin").style.display = isLogin ? "none" : "";
    document.getElementById("navRegister").style.display = isLogin ? "none" : "";
    document.getElementById("navLogout").style.display = isLogin ? "" : "none";
}

function logout() {
    localStorage.removeItem("token");
    updateNav();
    window.location.href = "/";
}

window.addEventListener("DOMContentLoaded", updateNav);
